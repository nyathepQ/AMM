{"ast":null,"code":"import React from\"react\";import styled from\"styled-components\";import{useState}from\"react\";import axios from'axios';import GlobalStyles from'../styles/GlobalStyles';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ModalOverlay=styled.div`\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 999;\n`;const ModalContent=styled.div`\n    background: rgb(206, 206, 206);\n    padding: 20px;\n    border-radius: 8px;\n    max-height: 80vh;\n    overflow-y: auto;\n    width: 40%;\n`;const ModButton=styled.button`\n    float: right;\n    margin-bottom: 10px;\n`;const Mensaje=styled.p`\n    color: ${props=>props.tipo==='error'?'violet':'black'};\n    text-align: center;\n    padding: 10px;\n`;const LoginForm=styled.form`\n    width: 20%;\n    min-width: 300px;\n    margin: 20px auto;\n    display: flex;\n    flex-direction: column;\n    padding-top: 15px;\n    gap: 15px;\n    border: 5px solid rgba(255, 255, 255, 0.089);\n    border-radius: 15px;\n    background-color:rgba(37, 94, 250, 0.51);\n\n    i {\n    margin-top: 15px;\n    margin-bottom: 6px;\n    color: black;\n    }\n\n    input {\n    align-self: center;\n    padding: 5px;\n    min-width: 100px;\n    width: 80%;\n    max-width: 250px;\n    height: 16px;\n    margin-left: 5%;\n    margin-right: 5%;\n    border: 2px solid black;\n    border-radius: 5px;\n    background-color: #ffffff6b; /* Blanco con transparencia */\n    }   \n\n    div {\n    flex-direction: row;\n    align-self: center;\n    gap: 5px;\n    }\n`;function ModalRegister(_ref){let{onClose}=_ref;const[error,setError]=useState('');const[mensaje,setMensaje]=useState('');const defStatusNuevoUser={nombre_usuario:'',contrasena:'',token:''};const[nuevoUsuario,setNuevoUsuario]=useState(defStatusNuevoUser);const handleRegister=async ev=>{ev.preventDefault();setMensaje('');setError('');const botonPress=ev.nativeEvent.submitter.name;if(botonPress==='reg'){if(nuevoUsuario.nombre_usuario===''||nuevoUsuario.contrasena===''||nuevoUsuario.token===''){return setMensaje('El campo no puede estar vacio');}try{const response=await axios.post('http://localhost:3001/register',nuevoUsuario);if(response.data.mensaje){setMensaje(response.data.mensaje);setNuevoUsuario(defStatusNuevoUser);}else if(response.data.error){setError(response.data.error);}}catch(err){setError(err.response.data.mensaje);}}else if(botonPress==='close'){onClose();}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(GlobalStyles,{}),/*#__PURE__*/_jsx(ModalOverlay,{children:/*#__PURE__*/_jsxs(ModalContent,{children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'black'},children:\"Registro\"}),/*#__PURE__*/_jsxs(LoginForm,{onSubmit:handleRegister,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nombre_usuario\",children:\"Usuario\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"nombre_usuario\",id:\"nombre_usuario\",value:nuevoUsuario.nombre_usuario,onChange:e=>setNuevoUsuario(nuevoUsuario=>({...nuevoUsuario,nombre_usuario:e.target.value.trimStart()}))}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"contrasena\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"contrasena\",id:\"contrasena\",value:nuevoUsuario.contrasena,onChange:e=>setNuevoUsuario(nuevoUsuario=>({...nuevoUsuario,contrasena:e.target.value.trimStart()}))}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"token\",children:\"Token\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"token\",id:\"token\",value:nuevoUsuario.token,onChange:e=>setNuevoUsuario(nuevoUsuario=>({...nuevoUsuario,token:e.target.value}))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ModButton,{name:\"close\",children:\"Cerrar\"}),/*#__PURE__*/_jsx(ModButton,{name:\"reg\",children:\"Registro\"})]})]}),error&&/*#__PURE__*/_jsx(Mensaje,{tipo:\"error\",children:error}),mensaje&&/*#__PURE__*/_jsx(Mensaje,{tipo:\"mensaje\",children:mensaje})]})})]});};export default ModalRegister;","map":{"version":3,"names":["React","styled","useState","axios","GlobalStyles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ModalOverlay","div","ModalContent","ModButton","button","Mensaje","p","props","tipo","LoginForm","form","ModalRegister","_ref","onClose","error","setError","mensaje","setMensaje","defStatusNuevoUser","nombre_usuario","contrasena","token","nuevoUsuario","setNuevoUsuario","handleRegister","ev","preventDefault","botonPress","nativeEvent","submitter","name","response","post","data","err","children","style","color","onSubmit","htmlFor","type","id","value","onChange","e","target","trimStart"],"sources":["C:/Users/nyath/Documents/Git proyects/GA8-220501096-AA1-EV01/amm/frontend/src/components/ModelRegister.jsx"],"sourcesContent":["import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useState } from \"react\";\r\nimport axios from 'axios';\r\nimport GlobalStyles from '../styles/GlobalStyles';\r\n\r\nconst ModalOverlay = styled.div`\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 999;\r\n`;\r\n\r\nconst ModalContent = styled.div`\r\n    background: rgb(206, 206, 206);\r\n    padding: 20px;\r\n    border-radius: 8px;\r\n    max-height: 80vh;\r\n    overflow-y: auto;\r\n    width: 40%;\r\n`;\r\n\r\nconst ModButton = styled.button`\r\n    float: right;\r\n    margin-bottom: 10px;\r\n`;\r\n\r\nconst Mensaje = styled.p`\r\n    color: ${props => (props.tipo === 'error' ? 'violet' : 'black')};\r\n    text-align: center;\r\n    padding: 10px;\r\n`;\r\n\r\nconst LoginForm = styled.form`\r\n    width: 20%;\r\n    min-width: 300px;\r\n    margin: 20px auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding-top: 15px;\r\n    gap: 15px;\r\n    border: 5px solid rgba(255, 255, 255, 0.089);\r\n    border-radius: 15px;\r\n    background-color:rgba(37, 94, 250, 0.51);\r\n\r\n    i {\r\n    margin-top: 15px;\r\n    margin-bottom: 6px;\r\n    color: black;\r\n    }\r\n\r\n    input {\r\n    align-self: center;\r\n    padding: 5px;\r\n    min-width: 100px;\r\n    width: 80%;\r\n    max-width: 250px;\r\n    height: 16px;\r\n    margin-left: 5%;\r\n    margin-right: 5%;\r\n    border: 2px solid black;\r\n    border-radius: 5px;\r\n    background-color: #ffffff6b; /* Blanco con transparencia */\r\n    }   \r\n\r\n    div {\r\n    flex-direction: row;\r\n    align-self: center;\r\n    gap: 5px;\r\n    }\r\n`;\r\n\r\nfunction ModalRegister({onClose}){\r\n    const [error, setError] = useState('');\r\n    const [mensaje, setMensaje] = useState('');\r\n\r\n    const defStatusNuevoUser = {nombre_usuario: '', contrasena: '', token: ''}\r\n    const [nuevoUsuario, setNuevoUsuario] = useState(defStatusNuevoUser);\r\n\r\n    const handleRegister = async (ev) => {\r\n        ev.preventDefault();\r\n        setMensaje('');\r\n        setError('');\r\n\r\n        const botonPress = ev.nativeEvent.submitter.name;\r\n\r\n        if(botonPress === 'reg'){\r\n            if(nuevoUsuario.nombre_usuario === '' || nuevoUsuario.contrasena === '' || nuevoUsuario.token === ''){\r\n                return setMensaje('El campo no puede estar vacio');\r\n            }\r\n            try {\r\n                const response = await axios.post('http://localhost:3001/register', nuevoUsuario);\r\n                if (response.data.mensaje) {\r\n                    setMensaje(response.data.mensaje);\r\n                    setNuevoUsuario(defStatusNuevoUser);\r\n                } else if (response.data.error) {\r\n                    setError(response.data.error);\r\n                }\r\n            } catch (err){\r\n                setError(err.response.data.mensaje);\r\n            }            \r\n        } else if(botonPress === 'close'){\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    return (<>\r\n        <GlobalStyles/>\r\n        <ModalOverlay>\r\n            <ModalContent>                \r\n                <h2 style={{color: 'black'}}>Registro</h2>\r\n                <LoginForm onSubmit={handleRegister}>\r\n                    <label htmlFor=\"nombre_usuario\">Usuario</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"nombre_usuario\"\r\n                        id=\"nombre_usuario\"\r\n                        value={nuevoUsuario.nombre_usuario}\r\n                        onChange={(e) => setNuevoUsuario(nuevoUsuario => ({ ...nuevoUsuario, nombre_usuario: e.target.value.trimStart()}))}\r\n                    />\r\n                    <label htmlFor=\"contrasena\">Contrase√±a</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        name=\"contrasena\"\r\n                        id=\"contrasena\"\r\n                        value={nuevoUsuario.contrasena}\r\n                        onChange={(e) => setNuevoUsuario(nuevoUsuario => ({ ...nuevoUsuario, contrasena: e.target.value.trimStart()}))}\r\n                    />\r\n                    <label htmlFor=\"token\">Token</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        name=\"token\"\r\n                        id=\"token\"\r\n                        value={nuevoUsuario.token}\r\n                        onChange={(e) => setNuevoUsuario(nuevoUsuario => ({ ...nuevoUsuario, token: e.target.value}))}\r\n                    />\r\n                    <div>\r\n                        <ModButton name=\"close\">Cerrar</ModButton>\r\n                        <ModButton name=\"reg\">Registro</ModButton>                        \r\n                    </div>\r\n                </LoginForm>\r\n                {/* Mensajes */}\r\n                {error && <Mensaje tipo=\"error\">{error}</Mensaje>}\r\n                {mensaje && <Mensaje tipo=\"mensaje\">{mensaje}</Mensaje>}\r\n            </ModalContent>\r\n        </ModalOverlay>\r\n    </>);\r\n};\r\n\r\nexport default ModalRegister;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}